<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Quiz for Year 1</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background-color: #f0f9ff;
      background-image: url("data:image/svg+xml,%3Csvg width='52' height='26' viewBox='0 0 52 26' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239CE6FF' fill-opacity='0.25'%3E%3Cpath d='M10 10c0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6h2c0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4 3.314 0 6 2.686 6 6 0 2.21 1.79 4 4 4v2c-3.314 0-6-2.686-6-6 0-2.21-1.79-4-4-4-3.314 0-6-2.686-6-6zm25.464-1.95l8.486 8.486-1.414 1.414-8.486-8.486 1.414-1.414z' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .btn {
      transition: all 0.3s ease;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    .option {
      transition: all 0.2s ease;
    }

    .option:hover {
      transform: translateY(-3px);
    }

    .correct {
      background-color: #86efac !important;
      border-color: #22c55e !important;
    }

    .incorrect {
      background-color: #fca5a5 !important;
      border-color: #ef4444 !important;
    }

    .certificate {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23d4af37' fill-opacity='0.15'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    @keyframes float {
      0% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-10px);
      }

      100% {
        transform: translateY(0px);
      }
    }

    .float {
      animation: float 3s ease-in-out infinite;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-15px);
      }
    }

    .bounce {
      animation: bounce 2s infinite;
    }

    .ribbon {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 100px;
      height: 100px;
      overflow: hidden;
    }

    .ribbon-content {
      position: absolute;
      display: block;
      width: 150px;
      padding: 5px 0;
      background-color: #ff6b6b;
      box-shadow: 0 5px 10px rgba(0, 0, 0, .1);
      color: #fff;
      text-shadow: 0 1px 1px rgba(0, 0, 0, .2);
      text-align: center;
      right: -35px;
      top: 25px;
      transform: rotate(45deg);
    }

    .character {
      position: absolute;
      bottom: -30px;
      right: -30px;
      width: 120px;
      height: 120px;
      z-index: 10;
    }
  </style>
</head>

<body>
  <div class="min-h-screen flex flex-col items-center justify-center p-4">
    <!-- Welcome Screen -->
    <div id="welcome-screen"
      class="bg-white rounded-3xl shadow-xl p-8 max-w-md w-full text-center border-4 border-purple-400 relative">
      <div class="flex justify-center mb-4">
        <svg class="w-28 h-28 text-purple-500 float" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="currentColor">
          <path
            d="M11.7 2.805a.75.75 0 01.6 0A60.65 60.65 0 0122.83 8.72a.75.75 0 01-.231 1.337 49.949 49.949 0 00-9.902 3.912l-.003.002-.34.18a.75.75 0 01-.707 0A50.009 50.009 0 007.5 12.174v-.224c0-.131.067-.248.172-.311a54.614 54.614 0 014.653-2.52.75.75 0 00-.65-1.352 56.129 56.129 0 00-4.78 2.589 1.858 1.858 0 00-.859 1.228 49.803 49.803 0 00-4.634-1.527.75.75 0 01-.231-1.337A60.653 60.653 0 0111.7 2.805z" />
          <path
            d="M13.06 15.473a48.45 48.45 0 017.666-3.282c.134 1.414.22 2.843.255 4.285a.75.75 0 01-.46.71 47.878 47.878 0 00-8.105 4.342.75.75 0 01-.832 0 47.877 47.877 0 00-8.104-4.342.75.75 0 01-.461-.71c.035-1.442.121-2.87.255-4.286A48.4 48.4 0 016 13.18v1.27a1.5 1.5 0 00-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.661a6.729 6.729 0 00.551-1.608 1.5 1.5 0 00.14-2.67v-.645a48.549 48.549 0 013.44 1.668 2.25 2.25 0 002.12 0z" />
          <path
            d="M4.462 19.462c.42-.419.753-.89 1-1.394.453.213.902.434 1.347.661a6.743 6.743 0 01-1.286 1.794.75.75 0 11-1.06-1.06z" />
        </svg>
      </div>
      <h1 class="text-4xl font-bold text-purple-600 mb-4">English Quiz</h1>
      <h2 class="text-xl text-purple-500 mb-6">Year 1 - KSSR Semakan 2017</h2>
      <p class="text-gray-600 mb-6 text-lg">Let's test your English knowledge with a fun quiz! Answer 30 questions and
        see how well you do.</p>

      <div class="mb-6">
        <label for="student-name" class="block text-left text-gray-700 mb-2 text-lg">Your Full Name:</label>
        <input type="text" id="student-name"
          class="w-full p-4 border-3 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500 text-lg"
          placeholder="Enter your name">
      </div>

      <button id="start-btn"
        class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-8 rounded-full text-xl shadow-lg">
        Start Quiz! üöÄ
      </button>
      <a href="index.html" class="mt-4 inline-block bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-full text-sm">
      ‚¨ÖÔ∏è Kembali ke Laman Utama
    </a>

      <!-- Decorative elements -->
      <div class="absolute -top-10 -left-10">
        <svg class="w-20 h-20 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="currentColor">
          <path fill-rule="evenodd"
            d="M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5zM18 1.5a.75.75 0 01.728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 010 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 01-1.456 0l-.258-1.036a2.625 2.625 0 00-1.91-1.91l-1.036-.258a.75.75 0 010-1.456l1.036-.258a2.625 2.625 0 001.91-1.91l.258-1.036A.75.75 0 0118 1.5zM16.5 15a.75.75 0 01.712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 010 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 01-1.422 0l-.395-1.183a1.5 1.5 0 00-.948-.948l-1.183-.395a.75.75 0 010-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0116.5 15z"
            clip-rule="evenodd" />
        </svg>
      </div>
      <div class="absolute -bottom-8 -right-8 bounce">
        <svg class="w-16 h-16 text-green-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="currentColor">
          <path fill-rule="evenodd"
            d="M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5z"
            clip-rule="evenodd" />
        </svg>
      </div>
    </div>

    <!-- Quiz Container -->
    <div id="quiz-container"
      class="hidden bg-white rounded-3xl shadow-xl p-8 max-w-md w-full border-4 border-purple-400 relative">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-purple-600" id="question-number">Soalan 1 / 30</h2>
        <div class="bg-purple-100 text-purple-800 font-bold py-2 px-4 rounded-full text-lg">
          Score: <span id="score">0</span>
        </div>
      </div>

      <div id="question-container" class="mb-6">
        <h3 class="text-2xl font-bold mb-6 text-purple-700" id="question-text">Question goes here</h3>
        <div id="options-container" class="space-y-4">
          <!-- Options will be inserted here -->
        </div>
      </div>

      <div class="flex justify-between mt-8">
        <button id="next-btn"
          class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-8 rounded-xl text-lg disabled:opacity-50 disabled:cursor-not-allowed"
          disabled>
          Next Question ‚Üí
        </button>
      </div>

      <!-- Decorative elements -->
      <div class="absolute -top-6 -right-6">
        <svg class="w-12 h-12 text-pink-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd"
            d="M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5z"
            clip-rule="evenodd" />
        </svg>
      </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen"
      class="hidden bg-white rounded-3xl shadow-xl p-8 max-w-md w-full text-center border-4 border-purple-400 relative">
      <div class="mb-6">
        <svg class="w-24 h-24 mx-auto text-purple-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="currentColor">
          <path fill-rule="evenodd"
            d="M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
            clip-rule="evenodd" />
        </svg>
      </div>
      <h2 class="text-3xl font-bold text-purple-600 mb-2">Quiz Complete!</h2>
      <p class="text-gray-600 mb-2 text-xl">Great job, <span id="result-name">Student</span>!</p>
      <div class="bg-purple-100 rounded-xl p-6 mb-6">
        <p class="text-2xl font-bold text-purple-700">Your Score: <span id="final-score">0</span> / 30</p>
        <p id="result-message" class="text-gray-700 mt-2 text-lg">Well done!</p>
      </div>

      <div class="space-y-4">
        <button id="view-certificate-btn"
          class="hidden btn w-full bg-gradient-to-r from-yellow-400 to-yellow-600 hover:from-yellow-500 hover:to-yellow-700 text-white font-bold py-3 px-6 rounded-xl text-lg">
          View Certificate üèÜ
        </button>
        <button id="try-again-btn"
          class="btn w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-xl text-lg">
          Try Again üîÑ
        </button>
        <a href="./index.html"
          class="btn bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-xl text-lg mt-4 inline-block">
          ‚¨ÖÔ∏è Go to Home
        </a>
      </div>

      <!-- Decorative elements -->
      <div class="absolute -top-8 -left-8">
        <svg class="w-16 h-16 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd"
            d="M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5z"
            clip-rule="evenodd" />
        </svg>
      </div>
      <div class="absolute -bottom-6 -right-6">
        <svg class="w-12 h-12 text-green-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
          fill="currentColor">
          <path fill-rule="evenodd"
            d="M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813A3.75 3.75 0 007.466 7.89l.813-2.846A.75.75 0 019 4.5z"
            clip-rule="evenodd" />
        </svg>
      </div>
    </div>

    <!-- Certificate Screen -->
    <div id="certificate-screen" class="hidden max-w-2xl w-full">
      <div id="certificate"
        class="bg-white rounded-xl shadow-xl p-8 border-8 border-double border-yellow-500 certificate relative">
        <div class="ribbon">
          <span class="ribbon-content">Excellent!</span>
        </div>
        <div class="text-center">
          <div class="mb-4">
            <svg class="w-20 h-20 mx-auto text-yellow-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
              fill="currentColor">
              <path fill-rule="evenodd"
                d="M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
                clip-rule="evenodd" />
            </svg>
          </div>
          <h2 class="text-4xl font-bold text-yellow-600 mb-2">Certificate of Achievement</h2>
          <p class="text-gray-600 mb-6 text-xl">This certifies that</p>
          <h3 class="text-3xl font-bold text-purple-600 mb-6" id="certificate-name">Student Name</h3>
          <p class="text-gray-600 mb-2 text-xl">has successfully completed the</p>
          <h4 class="text-2xl font-bold text-purple-600 mb-6">Year 1 English Quiz</h4>
          <p class="text-gray-600 mb-2 text-xl">with a perfect score of</p>
          <div class="bg-yellow-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6">
            <span class="text-3xl font-bold text-yellow-600">30/30</span>
          </div>
          <p class="text-gray-600 mb-6 text-xl">on <span id="certificate-date">April 15, 2023</span></p>

          <div class="mt-8 border-t-2 border-gray-200 pt-4">
            <p class="text-gray-500">KSSR Semakan 2017 Syllabus</p>
          </div>
        </div>

        <!-- Character illustration -->
        <div class="character">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="100%" height="100%">
            <circle cx="256" cy="256" r="256" fill="#FFC107" />
            <circle cx="256" cy="256" r="200" fill="#FFECB3" />
            <circle cx="180" cy="200" r="30" fill="#795548" />
            <circle cx="332" cy="200" r="30" fill="#795548" />
            <path d="M256 280 C 200 280, 180 340, 256 360 C 332 340, 312 280, 256 280" fill="#795548" />
          </svg>
        </div>
      </div>

      <div class="flex justify-between mt-6">
        <button id="back-to-results-btn"
          class="btn bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-xl text-lg">
          Back to Results
        </button>
        <button id="download-certificate-btn"
          class="btn bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white font-bold py-3 px-6 rounded-xl text-lg">
          Download Certificate üì•
        </button>
      </div>

      <div class="text-center mt-6">
        <button id="try-again-from-cert-btn"
          class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-6 rounded-xl text-lg">
          Try Again üîÑ
        </button>
        <a href="./index.html"
          class="btn bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-xl text-lg mt-4 inline-block">
          ‚¨ÖÔ∏è Go to Home
        </a>
      </div>
    </div>
  </div>

  <script>
    // Quiz questions based on KSSR Semakan 2017 syllabus for Year 1
    const allQuestions = [
      {
        "question": "Which animal says 'Meow'?",
        "options": [
          "Dog",
          "Cat",
          "Bird",
          "Fish"
        ],
        "correctAnswer": "Cat"
      },
      {
        "question": "Which animal has a trunk?",
        "options": [
          "Cat",
          "Fish",
          "Elephant",
          "Goat"
        ],
        "correctAnswer": "Elephant"
      },
      {
        "question": "Which animal has stripes?",
        "options": [
          "Lion",
          "Tiger",
          "Bear",
          "Monkey"
        ],
        "correctAnswer": "Tiger"
      },
      {
        "question": "Which animal is known as the king of the jungle?",
        "options": [
          "Lion",
          "Elephant",
          "Giraffe",
          "Zebra"
        ],
        "correctAnswer": "Lion"
      },
      {
        "question": "Which animal can fly?",
        "options": [
          "Fish",
          "Dog",
          "Bird",
          "Cat"
        ],
        "correctAnswer": "Bird"
      },
      {
        "question": "Which animal lives in water?",
        "options": [
          "Dog",
          "Cat",
          "Fish",
          "Bird"
        ],
        "correctAnswer": "Fish"
      },
      {
        "question": "Which animal is known for hopping?",
        "options": [
          "Frog",
          "Snake",
          "Elephant",
          "Lion"
        ],
        "correctAnswer": "Frog"
      },
      {
        "question": "Which animal lays eggs?",
        "options": [
          "Tiger",
          "Bird",
          "Dog",
          "Sheep"
        ],
        "correctAnswer": "Bird"
      },
      {
        "question": "Which animal is green and jumps?",
        "options": [
          "Frog",
          "Snake",
          "Bear",
          "Cow"
        ],
        "correctAnswer": "Frog"
      },
      {
        "question": "What is the sound of a dog?",
        "options": [
          "Meow",
          "Woof",
          "Moo",
          "Quack"
        ],
        "correctAnswer": "Woof"
      },
      {
        "question": "What is the sound of a cow?",
        "options": [
          "Baa",
          "Moo",
          "Oink",
          "Roar"
        ],
        "correctAnswer": "Moo"
      },
      {
        "question": "What is the sound of a bird?",
        "options": [
          "Chirp",
          "Bark",
          "Meow",
          "Hiss"
        ],
        "correctAnswer": "Chirp"
      },
      {
        "question": "What is the sound of a cat?",
        "options": [
          "Meow",
          "Woof",
          "Moo",
          "Quack"
        ],
        "correctAnswer": "Meow"
      },
      {
        "question": "What is the colour of an apple?",
        "options": [
          "Red",
          "Blue",
          "Green",
          "Yellow"
        ],
        "correctAnswer": "Red"
      },
      {
        "question": "What is the colour of the sky?",
        "options": [
          "Red",
          "Green",
          "Blue",
          "Yellow"
        ],
        "correctAnswer": "Blue"
      },
      {
        "question": "What is the colour of a banana?",
        "options": [
          "Red",
          "Yellow",
          "Blue",
          "Green"
        ],
        "correctAnswer": "Yellow"
      },
      {
        "question": "What colour is grass?",
        "options": [
          "Green",
          "Pink",
          "Orange",
          "Brown"
        ],
        "correctAnswer": "Green"
      },
      {
        "question": "Which is a fruit?",
        "options": [
          "Pen",
          "Orange",
          "Ball",
          "Spoon"
        ],
        "correctAnswer": "Orange"
      },

      {
        "question": "Which is a vegetable?",
        "options": [
          "Carrot",
          "Toy",
          "Cake",
          "Phone"
        ],
        "correctAnswer": "Carrot"
      },
      {
        "question": "What do you drink?",
        "options": [
          "Water",
          "Bread",
          "Chair",
          "Book"
        ],
        "correctAnswer": "Water"
      },
      {
        "question": "What do you eat for breakfast?",
        "options": [
          "Cereal",
          "Shoe",
          "Pencil",
          "Table"
        ],
        "correctAnswer": "Cereal"
      },
      {
        "question": "What do you wear on your feet?",
        "options": [
          "Hat",
          "Socks",
          "Gloves",
          "Belt"
        ],
        "correctAnswer": "Socks"
      },
      {
        "question": "What do you use to write?",
        "options": [
          "Pen",
          "Spoon",
          "Fork",
          "Knife"
        ],
        "correctAnswer": "Pen"
      },
      {
        "question": "What do you use to cut paper?",
        "options": [
          "Scissors",
          "Hammer",
          "Screwdriver",
          "Wrench"
        ],
        "correctAnswer": "Scissors"
      },
      {
        "question": "What do you use to eat soup?",
        "options": [
          "Fork",
          "Knife",
          "Spoon",
          "Chopsticks"
        ],
        "correctAnswer": "Spoon"
      },
      {
        "question": "Fill in the blank: I ___ a book.",
        "options": [
          "am reading",
          "is reading",
          "are reading",
          "was reading"
        ],
        "correctAnswer": "am reading"
      },
      {
        "question": "Fill in the blank: She ___ happy.",
        "options": [
          "am",
          "is",
          "are",
          "was"
        ],
        "correctAnswer": "is"
      },
      {
        "question": "Fill in the blank: She __ happy.",
        "options": [
          "am",
          "is",
          "are",
          "be"
        ],
        "correctAnswer": "is"
      },
      {
        "question": "Fill in the blank: They ___ running.",
        "options": [
          "is",
          "are",
          "am",
          "was"
        ],
        "correctAnswer": "are"
      },
      {
        "question": "Fill in the blank: I ___ a cat.",
        "options": [
          "have",
          "has",
          "had",
          "having"
        ],
        "correctAnswer": "have"
      },
      {
        "question": "Fill in the blank: He ___ a dog.",
        "options": [
          "has",
          "have",
          "had",
          "having"
        ],
        "correctAnswer": "has"
      },

      {
        "question": "Fill in the blank: They ___ playing.",
        "options": [
          "is",
          "are",
          "am",
          "was"
        ],
        "correctAnswer": "are"
      },
      {
        "question": "Fill in the blank: I ___ a book.",
        "options": [
          "read",
          "reads",
          "reading",
          "am read"
        ],
        "correctAnswer": "read"
      },

      {
        "question": "Fill in the blank: We ___ going to school.",
        "options": [
          "am",
          "is",
          "are",
          "was"
        ],
        "correctAnswer": "are"
      },
      {
        "question": "Fill in the blank: The dog ___ barking.",
        "options": [
          "is",
          "are",
          "am",
          "was"
        ],
        "correctAnswer": "is"
      },
      {
        "question": "Fill in the blank: I ___ a student.",
        "options": [
          "am",
          "is",
          "are",
          "was"
        ],
        "correctAnswer": "am"
      },
      {
        "question": "Fill in the blank: She ___ a teacher.",
        "options": [
          "is",
          "are",
          "am",
          "was"
        ],
        "correctAnswer": "is"
      },
      {
        "question": "Fill in the blank: We ___ friends.",
        "options": [
          "is",
          "are",
          "am",
          "was"
        ],
        "correctAnswer": "are"
      },
      {
        "question": "Fill in the blank: They ___ friends.",
        "options": [
          "is",
          "are",
          "am",
          "was"
        ],
        "correctAnswer": "are"
      },
      {
        "question": "Fill in the blank: He ___ a boy.",
        "options": [
          "is",
          "are",
          "am",
          "were"
        ],
        "correctAnswer": "is"
      },

      {
        "question": "Choose the correct sentence.",
        "options": [
          "I am playing.",
          "I are playing.",
          "I be playing.",
          "I is playing."
        ],
        "correctAnswer": "I am playing."
      },
      {
        "question": "Choose the correct sentence.",
        "options": [
          "She are running.",
          "She is running.",
          "She am running.",
          "She run."
        ],
        "correctAnswer": "She is running."
      },
      {
        "question": "Choose the correct sentence.",
        "options": [
          "They is eating.",
          "They are eating.",
          "They am eating.",
          "They eats."
        ],
        "correctAnswer": "They are eating."
      },
      {
        "question": "Choose the correct sentence.",
        "options": [
          "He am tall.",
          "He are tall.",
          "He is tall.",
          "He be tall."
        ],
        "correctAnswer": "He is tall."
      },

      {
        "question": "Choose the correct sentence.",
        "options": [
          "I am happy.",
          "I are happy.",
          "I is happy.",
          "I be happy."
        ],
        "correctAnswer": "I am happy."
      },
      {
        "question": "Choose the correct sentence.",
        "options": [
          "She is happy.",
          "She are happy.",
          "She am happy.",
          "She be happy."
        ],
        "correctAnswer": "She is happy."
      },
      {
        "question": "Choose the correct sentence.",
        "options": [
          "We is happy.",
          "We are happy.",
          "We am happy.",
          "We be happy."
        ],
        "correctAnswer": "We are happy."
      },

      {
        "question": "Where is the cat?",
        "options": [
          "Under the table",
          "On the car",
          "In the sky",
          "Beside the bag"
        ],
        "correctAnswer": "Under the table"
      },
      {
        "question": "Where is the book?",
        "options": [
          "On the table",
          "Under the bed",
          "In the cupboard",
          "Beside the chair"
        ],
        "correctAnswer": "On the table"
      },
      {
        "question": "Where is the bird?",
        "options": [
          "On the tree",
          "Under the floor",
          "Inside the box",
          "Next to the phone"
        ],
        "correctAnswer": "On the tree"
      },
      {
        "question": "What is the boy feeling?",
        "options": [
          "Happy",
          "Sad",
          "Angry",
          "Scared"
        ],
        "correctAnswer": "Happy"
      },
      {
        "question": "How does the girl feel after losing her toy?",
        "options": [
          "Sad",
          "Excited",
          "Hungry",
          "Funny"
        ],
        "correctAnswer": "Sad"
      },
      {
        "question": "How does he feel on his birthday?",
        "options": [
          "Angry",
          "Happy",
          "Sleepy",
          "Afraid"
        ],
        "correctAnswer": "Happy"
      },
      {
        "question": "Which day comes after Monday?",
        "options": [
          "Tuesday",
          "Friday",
          "Sunday",
          "Saturday"
        ],
        "correctAnswer": "Tuesday"
      },
      {
        "question": "Which day comes before Friday?",
        "options": [
          "Thursday",
          "Monday",
          "Sunday",
          "Tuesday"
        ],
        "correctAnswer": "Thursday"
      },
      {
        "question": "Which day is the first day of the week?",
        "options": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Sunday"
        ],
        "correctAnswer": "Monday"
      },
      {
        "question": "Which month comes after January?",
        "options": [
          "February",
          "March",
          "April",
          "December"
        ],
        "correctAnswer": "February"
      },
      {
        "question": "Which month comes before December?",
        "options": [
          "November",
          "October",
          "September",
          "August"
        ],
        "correctAnswer": "November"
      },
      {
        "question": "How many days are in a week?",
        "options": [
          "5",
          "6",
          "7",
          "8"
        ],
        "correctAnswer": "7"
      },
      {
        "question": "How many months are in a year?",
        "options": [
          "10",
          "11",
          "12",
          "13"
        ],
        "correctAnswer": "12"
      },
      {
        "question": "What is the first month of the year?",
        "options": [
          "January",
          "February",
          "March",
          "April"
        ],
        "correctAnswer": "January"
      },
      {
        "question": "What is the last month of the year?",
        "options": [
          "October",
          "November",
          "December",
          "September"
        ],
        "correctAnswer": "December"
      },
      {
        "question": "Which month has 31 days?",
        "options": [
          "June",
          "July",
          "April",
          "September"
        ],
        "correctAnswer": "July"
      },
      {
        "question": "What number comes after 4?",
        "options": [
          "5",
          "6",
          "3",
          "2"
        ],
        "correctAnswer": "5"
      },
      {
        "question": "How many legs does a dog have?",
        "options": [
          "2",
          "3",
          "4",
          "6"
        ],
        "correctAnswer": "4"
      },
      {
        "question": "How many wheels does a bicycle have?",
        "options": [
          "1",
          "2",
          "3",
          "4"
        ],
        "correctAnswer": "2"
      },
      {
        "question": "How many days are in a week?",
        "options": [
          "5",
          "6",
          "7",
          "8"
        ],
        "correctAnswer": "7"
      },
      {
        "question": "How many months are in a year?",
        "options": [
          "10",
          "11",
          "12",
          "13"
        ],
        "correctAnswer": "12"
      },
      {
        "question": "How many letters are in the English alphabet?",
        "options": [
          "24",
          "25",
          "26",
          "27"
        ],
        "correctAnswer": "26"
      },
      {
        "question": "How many fingers do you have?",
        "options": [
          "8",
          "9",
          "10",
          "12"
        ],
        "correctAnswer": "10"
      },
      {
        "question": "What is the first letter of the alphabet?",
        "options": [
          "A",
          "B",
          "C",
          "D"
        ],
        "correctAnswer": "A"
      },
      {
        "question": "What is the last letter of the alphabet?",
        "options": [
          "X",
          "Y",
          "Z",
          "W"
        ],
        "correctAnswer": "Z"
      },
      {
        "question": "Which word is a noun?",
        "options": [
          "Run",
          "Happy",
          "Dog",
          "Quickly"
        ],
        "correctAnswer": "Dog"
      },
      {
        "question": "Which word is an adjective?",
        "options": [
          "Blue",
          "Run",
          "Eat",
          "Jump"
        ],
        "correctAnswer": "Blue"
      },
      {
        "question": "Which word is a verb?",
        "options": [
          "Sleep",
          "Soft",
          "Big",
          "Pink"
        ],
        "correctAnswer": "Sleep"
      },
      {
        "question": "Which word is a pronoun?",
        "options": [
          "He",
          "Run",
          "Red",
          "Apple"
        ],
        "correctAnswer": "He"
      },
      {
        "question": "Which one is a pronoun?",
        "options": [
          "I",
          "Book",
          "School",
          "Eat"
        ],
        "correctAnswer": "I"
      },
      {
        "question": "Which word is an action?",
        "options": [
          "Run",
          "Table",
          "Red",
          "Chair"
        ],
        "correctAnswer": "Run"
      },
      {
        "question": "Which word is a noun?",
        "options": [
          "Jump",
          "Happy",
          "Dog",
          "Quickly"
        ],
        "correctAnswer": "Dog"
      },
      {
        "question": "Which word is an adjective?",
        "options": [
          "Blue",
          "Run",
          "Eat",
          "Jump"
        ],
        "correctAnswer": "Blue"
      },
      {
        "question": "Which word means 'to run'?",
        "options": [
          "Walk",
          "Jump",
          "Run",
          "Sit"
        ],
        "correctAnswer": "Run"
      },
      {
        "question": "Which word means 'to jump'?",
        "options": [
          "Run",
          "Skip",
          "Hop",
          "Climb"
        ],
        "correctAnswer": "Hop"
      },
      {
        "question": "Which word means 'to eat'?",
        "options": [
          "Drink",
          "Chew",
          "Walk",
          "Climb"
        ],
        "correctAnswer": "Chew"
      },
      {
        "question": "Which word is a verb?",
        "options": [
          "Sleep",
          "Soft",
          "Big",
          "Pink"
        ],
        "correctAnswer": "Sleep"
      },
      {
        "question": "What is the opposite of 'hot'?",
        "options": [
          "Cold",
          "Warm",
          "Cool",
          "Sunny"
        ],
        "correctAnswer": "Cold"
      },
      {
        "question": "What is the opposite of 'happy'?",
        "options": [
          "Sad",
          "Angry",
          "Excited",
          "Tired"
        ],
        "correctAnswer": "Sad"
      },
      {
        "question": "What is the opposite of 'big'?",
        "options": [
          "Small",
          "Tall",
          "Wide",
          "Long"
        ],
        "correctAnswer": "Small"
      },
      {
        "question": "What is the opposite of 'fast'?",
        "options": [
          "Slow",
          "Quick",
          "Speedy",
          "Swift"
        ],
        "correctAnswer": "Slow"
      },
      {
        "question": "What is the opposite of 'up'?",
        "options": ["Down",
          "Left",
          "Right",
          "Forward"
        ],
        "correctAnswer": "Down"
      },
      {
        "question": "What is the opposite of 'day'?",
        "options": ["Night",
          "Morning",
          "Evening",
          "Afternoon"
        ],
        "correctAnswer": "Night"
      },
      {
        "question": "What is the opposite of 'light'?",
        "options": ["Dark",
          "Bright",
          "Shiny",
          "Clear"
        ],
        "correctAnswer": "Dark"
      },
      {
        "question": "What is the opposite of 'soft'?",
        "options": ["Hard",
          "Rough",
          "Smooth",
          "Sticky"
        ],
        "correctAnswer": "Hard"
      },
      {
        "question": "What is the opposite of 'new'?",
        "options": ["Old",
          "Young",
          "Fresh",
          "Modern"
        ],
        "correctAnswer": "Old"
      },
      {
        "question": "What is the opposite of 'wet'?",
        "options": ["Dry",
          "Moist",
          "Damp",
          "Soggy"
        ],
        "correctAnswer": "Dry"
      },
      {
        "question": "What is the opposite of 'sweet'?",
        "options": ["Bitter",
          "Sour",
          "Salty",
          "Spicy"
        ],
        "correctAnswer": "Bitter"
      },
      {
        "question": "What is the opposite of 'clean'?",
        "options": ["Dirty",
          "Messy",
          "Dusty",
          "Grimy"
        ],
        "correctAnswer": "Dirty"
      },
      {
        "question": "Fill in the blank: My brother wears a ___.",
        "options": [
          "shirt",
          "shert",
          "shete",
          "shet"
        ],
        "correctAnswer": "shirt"
      },
      {
        "question": "Fill in the blank: The cat is on the ___.",
        "options": [
          "roof",
          "rooff",
          "ruf",
          "rouf"
        ],
        "correctAnswer": "roof"
      },
      {
        "question": "Fill in the blank: I like to ___ books.",
        "options": [
          "read",
          "reed",
          "red",
          "reid"
        ],
        "correctAnswer": "read"
      },
      {
        "question": "Fill in the blank: The sun is very ___.",
        "options": [
          "hot",
          "hut",
          "hat",
          "hit"
        ],
        "correctAnswer": "hot"
      },
      {
        "question": "Fill in the blank: She has a ___ dog.",
        "options": [
          "big",
          "beg",
          "bag",
          "bog"
        ],
        "correctAnswer": "big"
      },
      {
        "question": "Fill in the blank: The sky is ___ today.",
        "options": [
          "blue",
          "blew",
          "blow",
          "blou"
        ],
        "correctAnswer": "blue"
      },
      {
        "question": "Fill in the blank: He is a ___ boy.",
        "options": [
          "thin",
          "tin",
          "thie",
          "thim"
        ],
        "correctAnswer": "thin"
      },
      {
        "question": "Fill in the blank: The tree is very ___.",
        "options": [
          "tall",
          "tale",
          "tail",
          "teal"
        ],
        "correctAnswer": "tall"
      },
      {
        "question": "Fill in the blank: I like to ___ ice cream.",
        "options": [
          "eat",
          "ete",
          "it",
          "at"
        ],
        "correctAnswer": "eat"
      },
      {
        "question": "Fill in the blank: The car is ___ fast.",
        "options": [
          "going",
          "goeing",
          "gowing",
          "goin"
        ],
        "correctAnswer": "going"
      },
      {
        "question": "Which shape has 3 sides?",
        "options": ["Circle", "Square", "Triangle", "Rectangle"],
        "correctAnswer": "Triangle"
      },
      {
        "question": "Which shape has 4 equal sides?",
        "options": ["Circle", "Square", "Triangle", "Rectangle"],
        "correctAnswer": "Square"
      },
      {
        "question": "What is the colour of the sun?",
        "options": ["Blue", "Red", "Yellow", "Green"],
        "correctAnswer": "Yellow"
      },
      {
        "question": "What do you use to write?",
        "options": ["Pen", "Eraser", "Ruler", "Paper"],
        "correctAnswer": "Pen"
      },
      {
        "question": "What do you use to cut paper?",
        "options": ["Scissors", "Glue", "Tape", "Stapler"],
        "correctAnswer": "Scissors"
      },
      {
        "question": "What do you wear on your head?",
        "options": ["Hat", "Shoe", "Belt", "Glove"],
        "correctAnswer": "Hat"
      },
      {
        "question": "What do you use to clean your teeth?",
        "options": ["Toothbrush", "Comb", "Spoon", "Fork"],
        "correctAnswer": "Toothbrush"
      },
      {
        "question": "What do you see with?",
        "options": ["Nose", "Ears", "Eyes", "Hands"],
        "correctAnswer": "Eyes"
      },
      {
        "question": "What do you hear with?",
        "options": ["Eyes", "Ears", "Nose", "Mouth"],
        "correctAnswer": "Ears"
      },
      {
        "question": "What do you smell with?",
        "options": ["Eyes", "Ears", "Nose", "Mouth"],
        "correctAnswer": "Nose"
      },
      {
        "question": "What do you taste with?",
        "options": ["Hands", "Feet", "Mouth", "Eyes"],
        "correctAnswer": "Mouth"
      },
      {
        "question": "Which is a vehicle?",
        "options": ["House", "Tree", "Car", "Book"],
        "correctAnswer": "Car"
      }
    ];

    // DOM elements
    const welcomeScreen = document.getElementById('welcome-screen');
    const quizContainer = document.getElementById('quiz-container');
    const resultsScreen = document.getElementById('results-screen');
    const certificateScreen = document.getElementById('certificate-screen');
    const startBtn = document.getElementById('start-btn');
    const nextBtn = document.getElementById('next-btn');
    const questionNumber = document.getElementById('question-number');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const scoreElement = document.getElementById('score');
    const finalScoreElement = document.getElementById('final-score');
    const resultMessage = document.getElementById('result-message');
    const viewCertificateBtn = document.getElementById('view-certificate-btn');
    const tryAgainBtn = document.getElementById('try-again-btn');
    const tryAgainFromCertBtn = document.getElementById('try-again-from-cert-btn');
    const backToResultsBtn = document.getElementById('back-to-results-btn');
    const downloadCertificateBtn = document.getElementById('download-certificate-btn');
    const studentNameInput = document.getElementById('student-name');
    const resultName = document.getElementById('result-name');
    const certificateName = document.getElementById('certificate-name');
    const certificateDate = document.getElementById('certificate-date');

    // Quiz state
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let answered = false;
    // Apply the randomization function to each question in the array
    const randomizedQuestions = allQuestions.map(randomizeQuestionOptions);

    // Initialize the quiz
    function initQuiz() {
      // Get student name
      const studentName = studentNameInput.value.trim() || "Student";
      resultName.textContent = studentName;
      certificateName.textContent = studentName;

      // Set current date for certificate
      const today = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      certificateDate.textContent = today.toLocaleDateString('en-US', options);

      // Select 5 random questions
      currentQuestions = getRandomQuestions(randomizedQuestions, 30);
      currentQuestionIndex = 0;
      score = 0;
      scoreElement.textContent = score;

      // Show first question
      showQuestion(currentQuestions[0]);

      // Update question number
      questionNumber.textContent = `Soalan 1 / 30`;

      // Hide welcome screen, show quiz
      welcomeScreen.classList.add('hidden');
      quizContainer.classList.remove('hidden');
    }

    function randomizeQuestionOptions(questionObj) {
      // Get the correct answer value based on the original index
      const correctAnswerValue = questionObj.options[questionObj.correctAnswer];

      // Create a copy of the options array to shuffle
      const shuffledOptions = [...questionObj.options];

      // Fisher-Yates shuffle algorithm
      for (let i = shuffledOptions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
      }

      // Find the new index of the correct answer in the shuffled array
      const newCorrectAnswerIndex = shuffledOptions.indexOf(correctAnswerValue);

      // Return the new question object with the shuffled options and updated correct answer index
      return {
        ...questionObj,
        options: shuffledOptions,
        correctAnswer: newCorrectAnswerIndex,
      };
    }

    // Get random questions
    function getRandomQuestions(questions, count) {
      const shuffled = [...questions].sort(() => 0.5 - Math.random());
      return shuffled.slice(0, count);
    }

    // Show a question
    function showQuestion(question) {
      answered = false;
      nextBtn.disabled = true;

      questionText.textContent = question.question;
      optionsContainer.innerHTML = '';

      question.options.forEach((option, index) => {
        const optionButton = document.createElement('button');
        optionButton.textContent = option;
        optionButton.classList.add('option', 'w-full', 'text-left', 'p-4', 'bg-white', 'border-3', 'border-purple-300', 'rounded-xl', 'hover:bg-purple-50', 'transition', 'text-lg', 'font-medium');

        // Add emoji or icon to make it more kid-friendly
        const emoji = ['üê∂', 'üê±', 'üê¶', 'üê†'][index % 4];
        optionButton.innerHTML = `<span class="inline-block mr-3">${emoji}</span> ${option}`;

        optionButton.addEventListener('click', () => selectAnswer(optionButton, option, question.correctAnswer));
        optionsContainer.appendChild(optionButton);
      });
    }

    // Handle answer selection
    function selectAnswer(selectedButton, selectedAnswer, correctAnswer) {
      if (answered) return;

      answered = true;
      nextBtn.disabled = false;

      // Disable all options
      const options = optionsContainer.querySelectorAll('.option');
      options.forEach(option => {
        option.disabled = true;
        option.classList.remove('hover:bg-purple-50');
      });

      // Check if answer is correct
      if (selectedAnswer === correctAnswer) {
        selectedButton.classList.add('correct');
        score++;
        scoreElement.textContent = score;

        // Small confetti burst for correct answer
        confetti({
          particleCount: 30,
          spread: 50,
          origin: { y: 0.7 }
        });
      } else {
        selectedButton.classList.add('incorrect');

        // Highlight correct answer
        options.forEach(option => {
          if (option.textContent.includes(correctAnswer)) {
            option.classList.add('correct');
          }
        });
      }
    }

    // Go to next question
    function nextQuestion() {
      currentQuestionIndex++;

      if (currentQuestionIndex < currentQuestions.length) {
        showQuestion(currentQuestions[currentQuestionIndex]);
        questionNumber.textContent = `Soalan ${currentQuestionIndex + 1} / 30`;
      } else {
        showResults();
      }
    }

    // Show results screen
    function showResults() {
      quizContainer.classList.add('hidden');
      resultsScreen.classList.remove('hidden');

      finalScoreElement.textContent = score;

      // Set result message based on score
      if (score === 30) {
        resultMessage.textContent = "Perfect score! You're amazing! üåü";
        viewCertificateBtn.classList.remove('hidden');

        // Trigger confetti for perfect score
        const duration = 3000;
        const animationEnd = Date.now() + duration;
        const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

        function randomInRange(min, max) {
          return Math.random() * (max - min) + min;
        }

        const interval = setInterval(function () {
          const timeLeft = animationEnd - Date.now();

          if (timeLeft <= 0) {
            return clearInterval(interval);
          }

          const particleCount = 50 * (timeLeft / duration);

          // Since particles fall down, start a bit higher than random
          confetti(Object.assign({}, defaults, {
            particleCount,
            origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
          }));
          confetti(Object.assign({}, defaults, {
            particleCount,
            origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
          }));
        }, 250);
      } else if (score >= 3) {
        resultMessage.textContent = "Great job! You're doing well! üëç";
      } else {
        resultMessage.textContent = "Keep practicing! You can do better next time! üí™";
      }
    }

    // Show certificate
    function showCertificate() {
      resultsScreen.classList.add('hidden');
      certificateScreen.classList.remove('hidden');

      // More confetti when viewing certificate
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 }
      });
    }

    // Event listeners
    startBtn.addEventListener('click', initQuiz);
    nextBtn.addEventListener('click', nextQuestion);
    viewCertificateBtn.addEventListener('click', showCertificate);

    tryAgainBtn.addEventListener('click', () => {
      resultsScreen.classList.add('hidden');
      initQuiz();
    });

    tryAgainFromCertBtn.addEventListener('click', () => {
      certificateScreen.classList.add('hidden');
      initQuiz();
    });

    backToResultsBtn.addEventListener('click', () => {
      certificateScreen.classList.add('hidden');
      resultsScreen.classList.remove('hidden');
    });

    downloadCertificateBtn.addEventListener('click', () => {
      // alert("In a real environment, this would download the certificate as an image.");
      const certificateElement = document.getElementById("certificate");
      html2canvas(certificateElement, { scale: 2 }).then((canvas) => {
        const link = document.createElement("a");
        link.download = "certificate.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
      // In a real implementation, we would use html2canvas or similar library
      // to convert the certificate div to an image and download it
    });
  </script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'955a0c498561d432',t:'MTc1MDkxMzA1MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>

</html>